<main class="overlay" *ngIf="modalService.isOpenComment$ | async">
  <div id="favDialog_updatePost" class="modal fade favDialog_updatePost">
    <app-loading *ngIf="modalService.isLoadingCmt"></app-loading>
    <div
      (click)="closeModalComment()"
      class="btnClose-create-post"
      *ngIf="!modalService.isLoadingCmt"
    >
      <i class="fa-solid fa-xmark"></i>
    </div>
    <div class="post-container-update" *ngIf="!modalService.isLoadingCmt">
      <div class="post">
        <!-- Slideshow container -->
        <div class="img-product">
          <div
            class="slideshow-container no-pic"
            *ngIf="modalService.images && modalService.images.length == 0"
          >
              <svg
                class="no-pic"
                width="800px"
                height="800px"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M7.828 5l-1-1H22v15.172l-1-1v-.69l-3.116-3.117-.395.296-.714-.714.854-.64a.503.503 0 0 1 .657.046L21 16.067V5zM3 20v-.519l2.947-2.947a1.506 1.506 0 0 0 .677.163 1.403 1.403 0 0 0 .997-.415l2.916-2.916-.706-.707-2.916 2.916a.474.474 0 0 1-.678-.048.503.503 0 0 0-.704.007L3 18.067V5.828l-1-1V21h16.172l-1-1zM17 8.5A1.5 1.5 0 1 1 15.5 7 1.5 1.5 0 0 1 17 8.5zm-1 0a.5.5 0 1 0-.5.5.5.5 0 0 0 .5-.5zm5.646 13.854l.707-.707-20-20-.707.707z"
                />
                <path fill="none" d="M0 0h24v24H0z" />
              </svg>
          </div>

          <div
            class="slideshow-container"
            *ngIf="modalService.images && modalService.images.length > 0"
          >
            <!-- Full-width images with number and caption text -->
            <div class="mySlides fade" *ngFor="let img of modalService.images">
              <img
                [src]="img"
                style="width: 100%; height: 100%; object-fit: cover"
              />
            </div>
            <!-- Next and previous buttons -->
            <div class="btn-slide-show" *ngIf="modalService.images && modalService.images.length > 0">
              <a class="prev" (click)="plusSlides(-1)">&#10094;</a>
              <a class="next" (click)="plusSlides(1)">&#10095;</a>
            </div>
          </div>
          <div class="numbertext" *ngIf="modalService.images && modalService.images.length > 0">
            <span id="numbertext">1</span
            >/
            <b>{{ modalService.images.length }}</b>
          </div>
        </div>
        <!-- ../../assets/images/cover/03.jpg -->
        <div class="post-detail">
          <div class="cmt-body">
            <div class="full-boxer" id="scrollableDiv">
              <div *ngFor="let cmt of modalService.listCmt; let i = index">
                <div class="comment__container opened">
                  <div class="comment__card">
                    <div class="box-top">
                      <div class="Profile">
                        <div class="profile-image">
                          <!-- <img [src]="cmt[9]" /> -->
                          <a
                            class="user-avatar small user-status-avatar no-border no-outline"
                          >
                            <div class="hexagon-container">
                              <div class="hexagon user-avatar-content">
                                <div
                                  class="hexagon-image"
                                  style="background-image: url('{{ cmt[9] }}')"
                                ></div>
                              </div>
                              <div class="hexagon user-avatar-border">
                                <div class="hexagon-border"></div>
                              </div>
                              <div class="hexagon user-avatar-progress-border">
                                <div class="user-avatar-progress"></div>
                              </div>
                              <p class="user-avatar-badge-text">1</p>
                            </div>
                          </a>
                        </div>

                        <div class="Name">
                          <strong>{{ cmt[7] }}</strong>
                          <span>&#64;{{ cmt[8] }}</span>
                        </div>
                      </div>
                      <div class="dropdown">
                        <div class="dropbtn" (click)="toggleDropdown(cmt[0])">
                          <i class="fa-solid fa-ellipsis"></i>
                        </div>
                        <div
                          id="myDropdown-{{ cmt[0] }}"
                          class="dropdown-menu-cmt dropdown-menu-right dropdown-menu-arrow"
                        >
                          <a
                            class="dropdown-item"
                            (click)="reportService.openReportAccount(cmt[1])"
                            >Báo cáo</a
                          >
                          <a
                            class="dropdown-item"
                            *ngIf="
                              cmt[1] == idUserCmt ||
                              idUserCmt == modalService.idUser
                            "
                            (click)="removeCmt(cmt[0])"
                            >{{ "xoabinhluan" | translate }}</a
                          >
                        </div>
                      </div>
                    </div>
                    <p>
                      <span *ngIf="cmt[10] != null">
                        <ng-container
                          *ngIf="modalService.getCheckedUsers(cmt[10])"
                        >
                          <a
                            *ngFor="
                              let item of modalService.getCheckedUsers(cmt[10])
                            "
                            href="profile"
                            (click)="
                              this.profileService.loadDataProfileTimeline(
                                item.mentioned_user_id
                              )
                            "
                            style="
                              text-decoration: none;
                              color: black;
                              font-weight: bolder;
                            "
                          >
                            {{ item.fullname }}
                          </a>
                        </ng-container>
                      </span>
                      {{ cmt[5] }}
                    </p>
                    <div class="comment__card-footer">
                      <div class="replies" (click)="reply(cmt[0], cmt[7])">
                        {{ cmt[12] }} {{ "traloi" | translate }}
                      </div>
                      <div
                        class="show-replies"
                        *ngIf="
                          (modalService.checkHideSeeMore.get(cmt[0]) == null ||
                            modalService.checkHideSeeMore.get(cmt[0])) &&
                          cmt[12] != '0'
                        "
                        (click)="modalService.loadDataReply(cmt[3], cmt[0])"
                      >
                        {{ "xemthem" | translate }}
                      </div>
                      <div
                        class="show-replies"
                        *ngIf="
                          modalService.checkHideSeeMore.get(cmt[0]) != null &&
                          !modalService.checkHideSeeMore.get(cmt[0]) &&
                          cmt[12] != '0'
                        "
                        (click)="removeSeeMoreCmt(cmt[0])"
                      >
                        {{ "anbot" | translate }}
                      </div>
                    </div>
                  </div>
                  <div id="first-reply-{{ cmt[0] }}">
                    <!-- reply comment -->
                  </div>
                </div>
              </div>
            </div>
            <form action="" class="form-cmt">
              <div class="comment-box">
                <input
                  type="text"
                  (input)="onInput($event)"
                  id="comment-input"
                  name="comment-input"
                  [(ngModel)]="comment_input"
                  placeholder="{{ 'Comment' | translate }}"
                  autocomplete="off"
                />
                <div *ngIf="modalService.checkBadword" class="valid-badword">
                  {{ "viphamnguyentac" | translate }}!
                </div>
                <!-- <div *ngIf="checkNullCmt" class="valid-badword">Bạn quên nhập nội dung rồi nè!</div> -->
                <button class="add-comment-btn" (click)="addComment()">
                  <i class="fa-regular fa-comment"></i>
                </button>
              </div>
              <div *ngIf="showDropdown" class="dropdown-menu">
                <ul id="dropdown">
                  <!-- <li>Item 1</li>
                  <li>Item 2</li>
                  <li>Item 3</li> -->
                  <li
                    *ngFor="let item of filteredItems"
                    (click)="selectItem(item)"
                  >
                    {{ item.fullname }}
                  </li>
                </ul>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
